{% extends '_layouts/blank.html' %}
{% set id = 'x' %}
{% set header_style = 'transparent' %}
{% set cssPath = 'x' %}
{% set title = data.title %}
{# {% set meta_image = ''%} #}
{# {% set meta_description = ''%} #}
{% set hide_pre_header = true %}


{% block main %}
<header>
  <div class="container">
    <nav>
      <a href="/x"><img src="/img/x/logo.png" alt="Ionic Logo" class="logo"></a>

      <ul>
        <li>
          <a href="/x/love-letter">Why X?</a>
        </li>
        <li>
          <a href="/books/rethinking-low-code">Read our Whitepaper</a>
        </li>
        <li>
          <a href="#schedule" class="btn dark anchor">Join beta</a>
        </li>
      </ul>
    </nav>
  </div>

  <hgroup class="container">
    <h1>{{ data.headline }}</h1>
    <p>{{ data.tagline }}</p>
    <div class="btns">
      <a href="#schedule" class="btn anchor">Get early access</a>
    </div>
    <!-- <a href="#sneak-peak" class="keep-reading anchor">
      Or keep scrolling to learn more
      <ion-icon name="ios-arrow-down"></ion-icon>
    </a> -->
  </hgroup>
</header>

<main>
  <div class="container hero">
    <img id="sneak-peak" src="/img/x/preview.png" alt="Ionic X Preview">
  </div>

  <section id="uncompromising" class="left">
    <div class="container">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.experiences_heading) }}
        <ul>
          <li>
            <svg width="15" height="22" viewBox="0 0 15 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.80995 1.04464L1 13.1429H6.14286L4.87683 20.8763C4.87442 20.8915 4.87504 20.9071 4.87863 20.922C4.88223 20.9368 4.88872 20.9507 4.89765 20.9625C4.90657 20.9743 4.91772 20.9837 4.9303 20.9902C4.94287 20.9967 4.95658 21 4.97045 21V21C4.9852 21 4.99975 20.9961 5.01293 20.9888C5.02611 20.9814 5.03757 20.9707 5.04638 20.9576L13.8571 8.85714H8.71429L9.98634 1.12277C9.98805 1.10736 9.98679 1.09172 9.98264 1.0769C9.97849 1.06207 9.97155 1.0484 9.96227 1.03678C9.953 1.02517 9.94161 1.01588 9.92885 1.00954C9.9161 1.0032 9.90228 0.999947 9.8883 1V1C9.873 1.00007 9.85793 1.00415 9.84432 1.0119C9.83071 1.01966 9.81893 1.03088 9.80995 1.04464V1.04464Z" stroke="#73849A" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {{ PrismicDOM.RichText.asHtml(data.experiences_item_1) }}
          </li>
          <li>
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.93582 20.77L8.8335 21.2594C8.97024 21.288 9.11272 21.2581 9.22641 21.1769C9.3401 21.0957 9.41463 20.9706 9.43196 20.832L8.93582 20.77ZM13.0458 20.77L12.5496 20.832C12.5669 20.9706 12.6415 21.0957 12.7552 21.1769C12.8689 21.2581 13.0113 21.288 13.1481 21.2594L13.0458 20.77ZM12.2108 14.0904L12.0276 13.6252C11.8151 13.7089 11.6863 13.9258 11.7147 14.1524L12.2108 14.0904ZM9.77077 14.0904L10.2669 14.1524C10.2952 13.9258 10.1665 13.7088 9.95402 13.6252L9.77077 14.0904ZM0.5 10.9908C0.5 16.0456 4.07457 20.2645 8.8335 21.2594L9.03815 20.2806C4.73319 19.3805 1.5 15.5627 1.5 10.9908H0.5ZM10.9908 0.5C5.19688 0.5 0.5 5.19688 0.5 10.9908H1.5C1.5 5.74917 5.74917 1.5 10.9908 1.5V0.5ZM21.4816 10.9908C21.4816 5.19688 16.7847 0.5 10.9908 0.5V1.5C16.2324 1.5 20.4816 5.74917 20.4816 10.9908H21.4816ZM13.1481 21.2594C17.907 20.2644 21.4816 16.0456 21.4816 10.9908H20.4816C20.4816 15.5627 17.2484 19.3805 12.9434 20.2806L13.1481 21.2594ZM11.7147 14.1524L12.5496 20.832L13.5419 20.708L12.7069 14.0284L11.7147 14.1524ZM12.394 14.5556C13.8144 13.9961 14.8211 12.6116 14.8211 10.9907H13.8211C13.8211 12.187 13.0786 13.2112 12.0276 13.6252L12.394 14.5556ZM14.8211 10.9907C14.8211 8.87528 13.1062 7.16042 10.9908 7.16042V8.16042C12.5539 8.16042 13.8211 9.42757 13.8211 10.9907H14.8211ZM10.9908 7.16042C8.8754 7.16042 7.16054 8.87528 7.16054 10.9907H8.16054C8.16054 9.42757 9.42768 8.16042 10.9908 8.16042V7.16042ZM7.16054 10.9907C7.16054 12.6115 8.16715 13.9961 9.58753 14.5556L9.95402 13.6252C8.90296 13.2111 8.16054 12.187 8.16054 10.9907H7.16054ZM9.43196 20.832L10.2669 14.1524L9.27464 14.0284L8.43968 20.708L9.43196 20.832Z" fill="#73849A"/>
            </svg>

            {{ PrismicDOM.RichText.asHtml(data.experiences_item_2) }}
          </li>
        </ul>
      </hgroup>
      <video id="roundtrip-video" muted loop playsinline width="100%" src="/img/x/low-code-v-full-code.mp4" poster="/img/x/low-code-v-full-code-poster.png" class="graphics">
        <source src="/img/x/low-code-v-full-code.mp4" type="video/mp4">
      </video>
    </div>
  </section>

  <section id="app-backlog" class="center">
    <div class="container">
      <hgroup>
        <h2>Tackle your entire app backlog</h2>
        <p>From mission critical consumer apps to internal workforce enablement, you can tackle every development use case.</p>
      </hgroup>
    </div>
      <div class="app-backlog-animation">
        <div class="app-card">
          <div class="icon">
            <ion-icon name="trail-sign-outline"></ion-icon>
          </div>
          <span class="label">
            Campus map
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="flash-outline"></ion-icon>
          </div>
          <span class="label">
            Erp Modernization app
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="key-outline"></ion-icon>
          </div>
          <span class="label">
            Meeting room scheduler
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="warning-outline"></ion-icon>
          </div>
          <span class="label">
            Safety incident tracker
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="card-outline"></ion-icon>
          </div>
          <span class="label">
            Expense reporter
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="checkmark-done-outline"></ion-icon>
          </div>
          <span class="label">
            Task tracker
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="book-outline"></ion-icon>
          </div>
          <span class="label">
           Knowledge base
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="cube-outline"></ion-icon>
          </div>
          <span class="label">
            Inventory tracker
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="people-outline"></ion-icon>
          </div>
          <span class="label">
            Employee directory
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="map-outline"></ion-icon>
          </div>
          <span class="label">
            Conference app
          </span>
        </div>

        <div class="app-card">
          <div class="icon">
            <ion-icon name="globe-outline"></ion-icon>
          </div>
          <span class="label">
            Logisitics manager
          </span>
        </div>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="callout">
        <div class="callout__illustration">
          <img src="/img/promos/rethinking-low-code.png?1"
               alt="How low-code's dramatic rise is driving a need for a more developer firendly approach."/>
        </div>
        <div class="callout__content">
          <hgroup>
            <h3>
              Rethinking Low-Code<br />
              <span>Understand the challenges of low-code and our unique dev-friendly approach.</span>
            </h3>
            <a href="/books/rethinking-low-code">
              Read our Whitepaper
              <ion-icon name="chevron-forward-outline"></ion-icon>
            </a>
          </hgroup>
        </div>
      </div>
    </div>

  </section>

  <section id="create" class="left">
    <div class="container">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.drag___drop) }}
      </hgroup>
      <img src="/img/x/drag-drop.png" alt="Drag and Drop app Creation" class="graphics">
    </div>
  </section>

  <section id="data" class="right">
    <div class="container v-center">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.data) }}
      </hgroup>
      <img src="/img/x/data-connect.png" alt="Control your data visually" class="graphics">
    </div>
  </section>

  <section id="native" class="left">
    <div class="container">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.native) }}
      </hgroup>
      <ul>
        <li>
          <img src="/img/x/native-icons/identity-vault.png" alt="">
          Identity Vault
        </li>
        <li>
          <img src="/img/x/native-icons/auth-connect.png" alt="">
          Auth Connect
        </li>
        <li>
          <img src="/img/x/native-icons/secure-storage.png" alt="">
          Secure Storage
        </li>
        <li>
          <img src="/img/x/native-icons/camera.png" alt="">
          Camera
        </li>
        <li>
          <img src="/img/x/native-icons/keyboard.png" alt="">
          Keyboard
        </li>
        <li>
          <img src="/img/x/native-icons/calendar.png" alt="">
          Calendar
        </li>
        <li>
          <img src="/img/x/native-icons/contacts.png" alt="">
          Contacts
        </li>
        <li>
          <img src="/img/x/native-icons/geolocation.png" alt="">
          Geolocation
        </li>
        <li>
          <img src="/img/x/native-icons/file-system.png" alt="">
          File system
        </li>
        <li class="footnote">and more...</li>
      </ul>
    </div>
  </section>

  <section id="ci" class="right">
    <div class="container v-center">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.ci) }}
      </hgroup>
      <img src="/img/x/live-updates.png" alt="" class="graphics">
    </div>
  </section>

  <div class="bar">
    <div class="container">
      <h2>{{ data.community_headline }}</h2>
      <ul>
        <li>{{ data.community_item_1_html | safe }}</li>
        <li>{{ data.community_item_2_html | safe }}</li>
        <li>{{ data.community_item_3_html | safe }}</li>
        <li>{{ data.community_item_4_html | safe }}</li>
      </ul>
    </div>
  </div>

  <section class="center">
    <div class="container">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.platform_headline) }}
      </hgroup>
      <ul class="items">
        {% for item in data.platform_items %}
          <li>
            <img src="{{item.image.url}}"
                 srcset="{{item.image['1x'].url}} 1x, {{item.image.url}} 2x"
                 alt="{{item.image.alt}}">
            {{ PrismicDOM.RichText.asHtml(item.text) }}
          </li>
        {% endfor %}
      </ul>
    </div>
  </section>

  <div id="what-you-got">
    <div class="container">
      <h2>What you get</h2>
      <ul class="checkmark-list checkmark-list--split">

        {% for feature in data.what_you_get %}
          <li>{{ feature.item }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</main>

<div id="schedule">
  <div class="container">
    <div class="expander">
      <hgroup>
        {{ PrismicDOM.RichText.asHtml(data.footer_cta) }}
        <div class="hubspot-override hubspot-override--large">
          <!--[if lte IE 8]>
          <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
          <![endif]-->
          <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
          <script>
            hbspt.forms.create({
              portalId: "3776657",
              formId: "cf56f622-dbdb-4b82-a30b-7f5e066d877f",
              css: ""
          });
          </script>
        </div>
      </hgroup>
    </div>
  </div>
</div>

{# <pre><code>{{ data | dump(2) }}</code></pre> #}

{% endblock %}

{% block modals %}

{% endblock %}

{% block scripts %}

<script>
  // round trip video
  (function(){

    var video = document.querySelector('#roundtrip-video'),
        isPaused = true;

    var observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if(entry.intersectionRatio != 1  && !isPaused){
            video.pause();
            isPaused = true;
          }
          else if (entry.intersectionRatio == 1 && isPaused) {
            video.play();
            isPaused=false;
          }
        });
      }, {threshold: 1});
      observer.observe(video);
  })();

  // backlog animation
  (function(){
    var winWidth = window.innerWidth,
        stage = document.querySelector('#app-backlog'),
        cardContainer = document.querySelector('.app-backlog-animation'),
        cardEls = document.querySelectorAll('.app-card'),
        cards = [],
        cardWidth = cardEls[0].getBoundingClientRect().width,
        numCards = cardEls.length - 1,
        gutter = cardEls[1].getBoundingClientRect().left - cardWidth,
        startPos = 0,
        endPos = (cardWidth + gutter) * numCards,
        containerWidth = endPos + cardWidth,
        speed = 0.5,
        scrimLength = 300;

    var setup = function() {
      cardContainer.style.width = containerWidth + "px";
      for (var i = 0; i < cardEls.length; i++) {
        var card = cardEls[i],
            x = i * (cardWidth + gutter);
        card.classList.add('js-animate');
        card.style.transform = 'translateX(' + x + 'px)';
        cards.push({
          el: card,
          x: x,
          i: i
        });
      }
      setShading();
    }

    var draw = window.rafContext(function() {
      for (var card of cards) {
        if (card.x + cardWidth < 0) {
          card.x = endPos + gutter;
        } else {
          card.x = card.x - speed;
        }
        card.el.style.transform = 'translateX(' + card.x + 'px)';
      }
      setShading();
    });

    function setShading() {
      var leftClamp,
          rightClamp;

      if (containerWidth > winWidth) {
        var offset = Math.abs(winWidth - containerWidth) / 2;
        var leftClamp = offset - (scrimLength / 2);
        var rightClamp = leftClamp + winWidth + scrimLength;
      } else {
        leftClamp = cardWidth;
        rightClamp = endPos;
      }

      leftClamp -= cardWidth / 2;
      rightClamp -= cardWidth / 2;

      var scrimEdgeRight = rightClamp - scrimLength;
      var scrimEdgeLeft = leftClamp + scrimLength;

      for (var card of cards) {
        if (card.x > scrimEdgeRight && card.x <= rightClamp) {
          card.el.style.opacity = mapRange(card.x, scrimEdgeRight, rightClamp, 1, 0.0);
        } else if (card.x > -cardWidth && card.x <= scrimEdgeLeft) {
          card.el.style.opacity = mapRange(card.x, leftClamp, scrimEdgeLeft, 0.0, 1);
        } else if (card.x < leftClamp || card.x > rightClamp ){
          card.el.style.opacity = 0;
        }
      }
    }

    window.addEventListener('resize', handleResize);
    function handleResize() {
      requestAnimationFrame(function(){
        winWidth = window.innerWidth;
        setShading();
      });
    }

    function mapRange(value, istart, istop, ostart, ostop) {
      return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));
    }

    return {
		  init: function(){
        setup();
        window.initAnimation(stage, draw, {
          once: false,
          playWhenInView: true,
          breakpoint: 1
        });
      }
	  }
  })().init()
</script>

{% endblock %}
